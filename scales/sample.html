<!doctype html>
<html>
<head>
  <style type="text/css">
    svg { width: 700px; height: 500px; background: #eee; }
  </style>
  <title>Sample D3 data manipulations</title>
</head>
<body>
<svg></svg>
<script type="text/javascript" src="d3-3.5.7.min.js"></script>
<script type="text/javascript">

var svg = d3.select('svg');
  
d3.json('cars.json', function(cars) {

  var queryResult = d3.nest()
    .key(function(car) { return car.fuel; })
    .entries(cars);

  var totalToSize = d3.scale.linear()
    .domain([1, 100])
    .rangeRound([1, 200]);
  
  svg.selectAll('circle')
    .data(queryResult)
    .enter()
  .append('circle')
    .attr('r', function(fuelType) { return totalToSize(fuelType.values.length); })
    .attr('cx', function(fuelType) { return Math.floor(Math.random()*400); })
    .attr('cy', function(fuelType) { return Math.floor(Math.random()*400); })
    .attr('stroke', '#000')
    .attr('stroke-width', '2px')
    .attr('fill', 'blue');


  cars.forEach(function(element, index, array) {
    // array[index]['price_num'] = element.price.split(' ')[0];
    console.log(element.price);
  });
  // console.log(cars[10]);
});

</script>
</body>
</html>