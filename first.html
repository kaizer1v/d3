<!doctype html>
<html>
<head>
<title>Polygons</title>
<style type="text/css">
  svg {
    width: 600px;
    height: 450px;
    background: #eee;
    border: 1px solid #000;
  }
</style>
<body>
  <svg id="graph"></svg>

<script type="text/javascript" src="d3-3.5.7.min.js"></script>
<script type="text/javascript">

  // Define a function that creats a scatter plot which takes some configurations.
  var Scatter = function(config) {
    var svg = d3.select(config.elem),
        data = config.data;
        scales = {
          x: d3.scale.linear().domain([10, 200]).range([100, 400]),
          y: d3.scale.linear().domain([200, 10]).range([100, 400])
        },
        axis = {
          x: d3.svg.axis().scale(scales.x).orient("bottom").ticks(5),
          y: d3.svg.axis().scale(scales.y).orient("left").ticks(5)
        }

    // create the circles
    svg.selectAll("circle")
      .data(data).enter()
      .append("circle")
        .attr({
          "cx": function(d) { return scales.x(d[0]); },
          "cy": function(d) { return scales.y(d[1]); },
          "r": function(d) { return Math.sqrt(sq(d[0]) + sq(d[1])) / 15; },
          "fill": function(d) { return "rgb("+ d[0] +", "+ d[1] +", 0)"; }
        });

    // append text to the circles
    svg.selectAll("text").data(data).enter().append("text")
      .text(function(d) { return "("+ d[0] +", "+ d[1] +")"; })
      .attr({
        "font-size": "10px",
        "font-color": "red",
        "x": function(d) { return scales.x(d[0]) + 13 },
        "y": function(d) { return scales.y(d[1]) + 4 }
      });

    // Create the x-axis
    svg.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(0, 420)")
      .call(axis.x);

    // Create the y-axis
    svg.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(80, 0)")
      .call(axis.y);

    // Using data points to calculate, cx, cy, radius as well as fill colour.
    // NOTE: radius = sqrt(x^2 + y^2) / 15  to scale the radius

    // Utility function
    function sq(num) {
      return num*num;
    }
      
  };


  // lets create a simple scatter plot
  var points = [
    [10, 20], [20, 100], [200, 50],
    [25, 80], [10, 200], [150, 75],
    [10, 70], [30, 150], [100, 15],
    [140, 57], [70, 10], [77, 36],
    [101, 68], [71, 51], [100, 115]
  ];

  var settings = {
    elem: "svg",
    data: points      // array of (x, y) points
  };
  Scatter(settings);

</script>
</body>
</head>
</html>