<!doctype html>
<html>
<head>
  <title>Tree Layout using Force</title>
  <style type="text/css">
    svg {
      background: #eee;
      width: 500px;
      height: 400px;
    }
  </style>
</head>
<body>
<svg></svg>

<script src="d3-3.5.7.min.js"></script>
<script>
  var tempX = [], tempY = [];

  var force = d3.layout.force()
    .size([500, 400]);

  var nodes = [
    { name: 'Hydrogen', weight: 10 }, 
    { name: 'Gold', weight: 124 }, 
    { name: 'Mercury', weight: 47 }, 
    { name: 'Chlorium', weight: 63 }
  ];
  var links = [{ source: 0, target: 1 }, { source: 2, target: 0 }, { source: 1, target: 3 }];
  
  force
    .nodes(nodes)
    .links(links)

  var link = d3.select('svg').selectAll('line')
    .data(links).enter().append('line')
    .attr('stroke', 'red')
    .attr('stroke-width', 1);

  var node = d3.select('svg').selectAll('rect')
    .data(nodes).enter().append('rect')
    .attr('width', function(d) { return d.weight * 0.25; })
    .attr('height', function(d) { return d.weight * 0.5; });  

  force.on('tick', function() {

    link
      .attr('x1', function(d) { return d.source.x; })
      .attr('y1', function(d) { return d.source.y; })
      .attr('x2', function(d) { return d.target.x; })
      .attr('y2', function(d) { return d.target.y; });

    node
      .attr('x', function(d) { tempX.push(d.x); return d.x; })
      .attr('y', function(d) { tempY.push(d.y); return d.y; })
      .attr('fill', 'purple');
  });

  force
    .charge(function(d) { return d.weight * d.weight * -550; })
    .gravity(1)

  // May the force be with you. -Yoda
  force.start();

  console.log(tempX, tempY);

</script>
</body>
</html>